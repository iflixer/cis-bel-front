<!doctype html>
<html lang="ru" dir="ltr">

<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex">
	<meta name="referrer" content="always">
	<meta name="viewport" content="user-scalable=0, initial-scale=1.0, maximum-scale=1.0, width=device-width">
	<title>player</title>
	<link rel="stylesheet" href="/player/css/player.css">
	<script src="/player/js/jquery.min.js"></script>
	<script src="/player/js/jquery.nice-select.min.js"></script>
	<script src="/player/js/player.js"></script>
	<script src="/player/js/hls.js"></script>
</head>

<body>

	<div id="selectors" class="video_selectors" style="display: block;">


		<span style="display: inline-block;">
			<select name="translator" id="translator-name" data-select="1">
								<option value="557" selected="selected" readonly="readonly">Zone Vision Studio</option>
								<option value="257">Parovoz Production</option>
							</select>
		</span>

	</div>


	<div id="player" class="player"></div>

	<script>
		var referrer = document.referrer;
		window.parent.postMessage('khL', referrer);
		
		var tgc = '';

		var cdn = cdn || {};

		window.abc = false;

		iframeReferer = 'site1.futemaxlive.com';

		cdn.player = (function () {
			var pub = {};

			var CDNplayer = null,
			CDNautoplay = 0,
			CDNstart = 0,
			CDNquality = null,
			// durationVideo = 3254,
			currentTime = 0,
			durationTime = null,
			iframeHostname = window.location.hostname,
			iframeVastKey = '',
			iframeVastValue = {'p': 0, 'm': 0};

			var getCDNplayerCUID = function () {
				return 'kh16';
			}

			pub.controlSelectors = function (event) {
				var is_hidden = 0;

				if (is_hidden == 1)
					return;

				if (event == 'show') {
					$('#selectors').stop(true,true).fadeIn(100);
				} else {
					$('#selectors').stop(true,true).fadeOut(100);
				}
			}

			pub.is_touch = function () {
				return 'ontouchstart' in document.documentElement;
			}

			pub.getIframeReferer = function () {
				return iframeReferer;
			}

			pub.getIframeHostname = function () {
				return iframeHostname;
			}

			var setSave = function () {
				var _key = "save-" + getCDNplayerCUID(),
				_value = {
					p: 16,
					t: 557,
					d: 0,
					tn: 'Zone Vision Studio',
					s: null,
					e: null,
					time: Math.floor(currentTime),
					duration: durationTime
				};

				try {
					localStorage.setItem(_key, JSON.stringify(_value));

					return true;
				} catch(e) {};

				return false;
			}

			var removeSave = function () {
				var _key = "save-" + getCDNplayerCUID();

				try {
					return localStorage.removeItem(_key);
				} catch(e) {};

				return true;
			}

			var getSave = function () {
				var is_hidden = 0;

				if (is_hidden == 1)
					return;

				var _key = "save-" + getCDNplayerCUID();

				try {
					return localStorage.getItem(_key);
				} catch(e) {};

				return null;
			}

			var setItem = function (k, v) {
				try {
					localStorage.setItem(k, v);

					return true;
				} catch(e) {};

				return false;
			}

			var getItem = function (k) {
				try {
					return localStorage.getItem(k);
				} catch(e) {};

				return null;
			}

			var toFormattedTime = function (input, withHours, roundSeconds) {
				if (roundSeconds) {
					input = Math.ceil(input);
				}

				var hoursString = '00';
				var minutesString = '00';
				var secondsString = '00';
				var hours = 0;
				var minutes = 0;
				var seconds = 0;

				hours = Math.floor(input / (60 * 60));
				input = input % (60 * 60);

				minutes = Math.floor(input / 60);
				input = input % 60;

				seconds = input;

				hoursString = (hours >= 10) ? hours.toString() : '0' + hours.toString();
				minutesString = (minutes >= 10) ? minutes.toString() : '0' + minutes.toString();
				secondsString = (seconds >= 10) ? seconds.toString() : '0' + seconds.toString();

				return ((withHours) ? hoursString + ':' : '') + minutesString + ':' + secondsString;
			}

			pub.setVBR = function (v) {
				setItem('vbr', v);
			}

			pub.getVBR = function () {
				var _vbr = getItem('vbr');

				return ((_vbr !== null) ? _vbr : iframeReferer);
			}

			pub.buildCDNplayer = function () {
				pub.setVBR(iframeReferer);

				/*if (document.referrer) {
					var referrer = document.referrer;
					var matches = referrer.match(/^https?\:\/\/(?:www\.)?([^\/?#]+)(?:[\/?#]|$)/i);
					var domain = matches && matches[1];

					if (domain !== null && domain != 'api.kholobok.biz') {
						iframeReferer = domain;

						pub.setVBR(iframeReferer);
					}
				}*/

				try {
					if (localStorage.getItem('pljsvolume_updated') === null) {
						localStorage.setItem('pljsvolume', 1);
						localStorage.setItem('pljsvolume_updated', 1);
					}
				} catch (e) {};

				if (CDNplayer === null) {
					// console.log(CDNplayerConfig);
					CDNplayer = new Playerjs(CDNplayerConfig);
				}
			}

			var lns = [];

			PlayerjsEvents = function (event, id, info) {
				console.log(event, id, info);

				if (event == "init") {
					if (CDNplayer.api('adblock')) {
						window.abc = true;
					}
				}

				if (event == 'subtitle') {
					var cc = document.getElementById('player_control_cc_icon0'),
					cl = 'none',
					arr,
					ln = ((lns[info] !== undefined) ? lns[info] : "");

					if (ln == '') {
						arr = cc.className.split(" ");

						if (arr.indexOf(cl) == -1) {
							cc.className += ' '+ cl;
						}
					} else {
						cc.className = cc.className.replace(/\bnone\b/g, "");
					}

					cc.setAttribute('data-content', ln.replace(/\-\d+/i, ''));
				}

				if (event == "play") {
					//
				}

				if (event == "play" || event == "start" || event == "vast_init") {
					pub.controlSelectors('hide');

					$('#save-holder').remove();
				}

				if (event == "start") {
					$.ajax({
						type: 'get',
						url: '/apishow/shows.show',
						data: 'domain=' + pub.getVBR() + (tgc ? '&tgc=' + tgc : ''),
						dataType: "html",
						cache: false,
						success: function (response) {}
					});
				}

				if (event == "pause" || event == "end") {
					pub.controlSelectors('show');
				}

				if (event == "end") {
					$.ajax({
						type: 'get',
						url: '/apishow/shows.fullshow',
						data: 'domain=' + pub.getVBR() + (tgc ? '&tgc=' + tgc : ''),
						dataType: "html",
						cache: false,
						success: function (response) {}
					});
				}

				if (event == "new") {
					//
				}

				if (event == "time") {
					if (info > 0 && CDNplayer.api('duration') > 0) {
						currentTime = info;
						durationTime = CDNplayer.api('duration');

						setSave();
					}
				}

				if (event == "reload") {
					//
				}

				if (event == "vast_load") {
					if (info == "preroll") {
						iframeVastKey = 'p';
					} else if (info == "midroll") {
						iframeVastKey = 'm';
					}

					if (typeof iframeVastValue[iframeVastKey] != 'undefined') {
						iframeVastValue[iframeVastKey]++;
					}
				}

				if (event == "vast_complete" || event == "vast_skip") {
					if (typeof iframeVastValue[iframeVastKey] != 'undefined') {
						var matches = $.parseJSON(info).url.match(/khtag=([0-9]+)/i);
						var ad_id = matches[1];

						$.ajax({
							type: 'get',
							url: '/apishow/shows.showsAd',
							data: 'domain='+ pub.getVBR() + '&id=' + ad_id + (tgc ? '&tgc=' + tgc : ''),
							dataType: "html",
							cache: false,
							success: function (response) {}
						});
					}
				}
			}

			PlayerReady = function () {
				if (CDNautoplay == 0) {
					var _save = getSave();

					if (_save) {
						try {
							_save = JSON.parse(_save);

							if (_save.t !== 0 && _save.tn !== null && $('#translator-name option[value="' + _save.t + '"]').length < 1) {
								return false;
							}

							var _allowed = 1,
							_cmod = '';

							switch (_cmod) {
								case 'translator':
									
									if (_save.t != '20') {
										_allowed = 0;
									}

									break;

								case 'season':
									
									if (_save.s != 1) {
										_allowed = 0;
									}

									break;

								case 'episode':
									
									if (_save.s != 1 || _save.e != 1) {
										_allowed = 0;
									}

								case 'single':
									
									if (_save.t != '20' || _save.s != 1 || _save.e != 1) {
										_allowed = 0;
									}

									break;
							}

							var _cstop = 0;

							if (_cstop > 0 && durationVideo > 0 && Math.ceil(_save.time*100/durationVideo) >= _cstop) {
								_allowed = 0;
							}

							if (_allowed == 1) {
								var _url_params = [];

								_url_params.push('domain=' + pub.getVBR());

								if (_save.t != null) {
									_url_params.push('translation=' + _save.t);
								}

								if (_save.s != null) {
									_url_params.push('season=' + _save.s);
								}

								if (_save.e != null) {
									_url_params.push('episode=' + _save.e);
								}

																																
								if (tgc) {
									_url_params.push('tgc=' + tgc);
								}

								if (_save.t === 0 && _save.tn === null) {
									if (_save.time)
										_url_params.push('start=' + _save.time);

									_url_params = '/show/' + _save.p + ((_url_params.length > 0) ? '?' + _url_params.join('&') : '');
								} else {
									_url_params.push('start=' + _save.time);
									_url_params.push('autoplay=1');

									_url_params = '/show/' + _save.p + ((_url_params.length > 0) ? '?' + _url_params.join('&') : '');
								}

								var _html = '<div id="save-holder" class="save_holder" style="display: none;"><a id="continue-play" href="javascript:void(0)" data-url="' + _url_params + '">продолжить просмотр с ' + toFormattedTime(_save.time, true, true) + '</a>' + ((_save.e != null) ? '<div class="save_holder_sting">' + ((_save.s != null) ? 'сезон ' + _save.s + ' ' : '') + ((_save.e != null) ? 'серия ' + _save.e : '') + '</div>' : '') + ((_save.tn != null) ? '<div class="save_holder_sting"><b>' + _save.tn + ((_save.d == 1) ? ' (расшир. версия)' : '') + '</b></div>' : '') + '</div>';

								$(_html).appendTo('body');

								$('#save-holder').css({'margin-left': -1 * $('#save-holder').width() / 2, 'left': '50%'}).show();
							}
						} catch (e) {};
					}
				}
			}

			/* player config */
			CDNquality = getItem('pljsquality');

			var CDNplayerConfig = {
				'id': 'player',
				'cuid': getCDNplayerCUID(),
				'poster': null,
				'file': '[240]https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/240.mp4:hls:manifest.m3u8 or https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/240.mp4,[360]https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/360.mp4:hls:manifest.m3u8 or https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/360.mp4,[480]https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/480.mp4:hls:manifest.m3u8 or https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/480.mp4,[720]https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/720.mp4:hls:manifest.m3u8 or https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/720.mp4,[1080]https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/1080.mp4:hls:manifest.m3u8 or https://storage.kinohd.co/movies/920b4ad71a8c2ea1d643a4a3861f4a763f100eea/19d80d5b70502404f5fd5b0fc5200058:2025071720/1080.mp4',
				'default_quality': ((CDNquality !== null) ? CDNquality : '480p'),
				'subtitle': false,

												'preroll': 'https://cdn0.cdnhubstream.pro/ad.xml?domain=site1.futemaxlive.com&khtag=1',
				
				
				'hlsconfig': {
					// 'maxBufferLength': 60, // 180
					// 'maxBufferSize': 33554432000,
					// 'enableSoftwareAES': true,
					// 'progressive': true,
					'startFragPrefetch': true,
			    'enableWorker': true,
			    'fragLoadingRetryDelay': 500,
			    'maxBufferHole': 1,
			    'maxBufferLength': 30,
			    // Может помочь при ошибках seek:
			    'maxFragLookUpTolerance': 0.1
				},
				'hlsdebug': 0,
				'debug': 0,
				'ready': PlayerReady(),
				'autoplay': CDNautoplay,
				'start': CDNstart
			}

			return pub;
		}());

		$(function () {
			if (!cdn.player.is_touch()) {
				$('#selectors select[data-select="1"]').niceSelect();

				setTimeout(function () {
					$('.nice-select ul').each(function () {
						var _dropdown = $(this),
						_selected = null,
						_pos = 0;

						// _dropdown.find('li[data-value="0"]').hide();

						_selected = _dropdown.find('.selected');
						_pos = _selected.position().top;

						if (_pos > 0) {
							_dropdown.animate({scrollTop: _selected.position().top - _selected.height() / 2}, 0);
						}
					});
				}, 0);
			}

			$('#translator-name option[value="0"]').hide();

			cdn.player.controlSelectors('show');

			cdn.player.buildCDNplayer();

			$('#continue-play').on('click', function (e) {
				e.preventDefault();

				window.location.href = $(this).data('url');
			});

			
				// movie

				var p_id = 16,
				type = 'movie',
				m_s = 'auto',
				m_s_set = 1;

				$('#translator-name').change(function () {
					var t = $(this).find(':selected').attr('value');
					window.location.href = '/show/' + p_id + '?domain=' + iframeReferer + '&translation=' + t + (tgc ? '&tgc=' + tgc : '');
				});

			
		});

	</script>

	<!-- Yandex.Metrika counter -->
	<script type="text/javascript">
		var yaParams = { ip: "151.37.162.102, 162.158.116.72" };

		(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
		m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
		(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

		ym(70538995, "init", {
			clickmap:true,
			trackLinks:true,
			accurateTrackBounce:true,
			webvisor:true,

			params: window.yaParams
		});
	</script>
	<noscript>
		<div><img src="https://mc.yandex.ru/watch/70538995" style="position:absolute; left:-9999px;" alt="" /></div>
	</noscript>
	<!-- /Yandex.Metrika counter -->

</body>

</html>